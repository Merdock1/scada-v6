@page "/ru/latest/modules/mod-db-export"
@{
    Layout = "_ArticleLayout";
    ViewBag.Title = "Модуль экспорта в БД";
}

<nav class="doc-toc">
    <div class="h6">На этой странице</div>
    <hr>
    <ul>
        <li><a href="#overview">Обзор</a></li>
        <li><a href="#configuring">Конфигурирование</a></li>
        <li><a href="#commands">Команды</a></li>
    </ul>
</nav>

<div class="doc-content">
    <h1>Модуль экспорта в БД</h1>
    <h2 id="overview">Обзор</h2>
    <p>Модуль экспорта в БД позволяет в реальном времени экспортировать данные, поступающие от устройств, в популярные базы данных. Поддерживаются СУБД Microsoft SQL Server, Oracle, PostgreSQL и MySQL. Модуль входит в дистрибутив Rapid SCADA и его отдельная установка не требуется. На следующем рисунке показана форма для настройки модуля.</p>
    <figure class="figure">
        <img src="mod-db-export-files/db-export-ru.png" class="figure-img img-fluid" alt="Модуль экспорта в БД" />
    </figure>
    <p>Модуль поддерживает экспорт в несколько различных баз данных параллельно. База данных, в которую выполняется экспорт, называется <strong>цель экспорта</strong>. На основе параметров цели экспорта модуль создаёт <strong>экспортёр</strong> - программный объект, который обрабатывает очереди данных и вызывает SQL-скрипты.</p>
    <p>Информация о работе модуля записывается в файл журнала <code>ModDbExport.log</code>, информация по каждому экспортёру записывается в файлы <code>ModDbExport_*.log</code> и <code>ModDbExport_*.txt</code>.</p>

    <h2 id="configuring">Конфигурирование</h2>

    <h2 id="commands">Команды</h2>
    <p>Модуль экспорта в БД поддерживает приём команд. Для отправки команд модулю в базе конфигурации должны быть созданы каналы выходного типа. <strong>Код тега</strong> канала должен совпадать с <strong>Кодом команды</strong>, который указан в основных параметрах цели экспорта. Команда может быть отправлена через веб-интерфейс приложения Вебстанция или с помощью другого клиента, взаимодействующего с приложением Сервер.</p>
    <p>При получении корректной команды, создаётся задание и добавляется в очередь заданий экспортёра. Максимальная длина очереди заданий равна 10. Если очередь заполнена, новые команды будут проигнорированы.</p>
    <p>Пример команды экспорта архива:</p>
    <pre><code>cmd=ExportArchive
startDT=2025-12-31 10:00:00
endDT=2025-12-31 11:00:00</code></pre>

    <p>Очистить очередь заданий:</p>
    <pre><code>cmd=ClearTaskQueue</code></pre>

    <p>В аргументах команд указывается время UTC.</p>
</div>
